<script>
  const AS_URL_BASE = "https://script.google.com/macros/s/AKfycbygWDajuKzy1ytS4iegMVhSWyRVJ5wxu9iYXUDH3iQvUko5uK2bfpdcbgptvnQ4_7Q/exec";

  const params = new URLSearchParams(window.location.search);
  const k = params.get("k"); // lee el valor del parámetro k

  if (k) {
    fetch(AS_URL_BASE + '?k=' + encodeURIComponent(k))
      .then(r => r.text())
      .then(r => {
        console.log("Respuesta:", r);
        if (r && r.startsWith("http")) {
          window.location.replace(r);
        } else {
          document.body.innerHTML = "<h2>No se encontró destino para '" + k + "'</h2>";
        }
      })
      .catch(err => {
        console.error("Error:", err);
        document.body.innerHTML = "<h2>Error al conectar con Apps Script</h2>";
      });
  } else {
    document.body.innerHTML = "<h2>Falta el parámetro k en la URL</h2>";
  }
</script>
