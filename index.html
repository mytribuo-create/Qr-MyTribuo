<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Redirigiendo...</title>
<script>
async function redirigir() {
  const params = new URLSearchParams(window.location.search);
  const k = params.get("k");
  if (!k) {
    document.body.innerText = "Falta parámetro k";
    return;
  }

  const endpoint = "https://script.google.com/macros/s/AKfycbwCd1DjVO8xsgSQXl4EgCGvQ6luV15hE7XO32TK5Tmg2NS7qPGQ0yteWy0W1itGdIE/exec" + encodeURIComponent(k);
  
  try {
    const res = await fetch(endpoint);
    const data = await res.json();
    if (data.url) {
      window.location.href = data.url;
    } else {
      document.body.innerText = data.error || "No se encontró la URL";
    }
  } catch (err) {
    document.body.innerText = "Error al conectar con Apps Script";
  }
}
redirigir();
</script>
</head>
<body>Redirigiendo...</body>
</html>
